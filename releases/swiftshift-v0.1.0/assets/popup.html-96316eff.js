import{c,r as x,j as e,a as M,C as z,b as E,R as $}from"./circle-check-9b79b332.js";import{S as y,T as k}from"./telegram-6fcb429f.js";/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],I=c("ArrowRight",T);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],R=c("Bookmark",L);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],P=c("ChevronDown",O);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],q=c("CircleHelp",A);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],H=c("EyeOff",B);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],D=c("Eye",F);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],V=c("Hash",U);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],W=c("RefreshCw",K);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],J=c("Search",G);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],X=c("Send",Q);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Z=c("Users",Y);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],te=c("Volume2",ee);(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const m of s.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&n(m)}).observe(document,{childList:!0,subtree:!0});function r(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(t){if(t.ep)return;t.ep=!0;const s=r(t);fetch(t.href,s)}})();const se=({label:l,isSecret:a,error:r,success:n,className:t="",type:s="text",...m})=>{const[d,o]=x.useState(!1),p=a?d?"text":"password":s;return e.jsxs("div",{className:`w-full ${t}`,children:[l&&e.jsx("label",{className:"block text-xs text-muted mb-1.5 font-medium uppercase tracking-wider",children:l}),e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:p,className:`
            w-full bg-surface/50 border-2 rounded-xl p-3 pl-4 pr-10 text-sm text-text 
            placeholder:text-gray-600 focus:outline-none transition-all duration-300
            ${r?"border-danger/50 focus:border-danger bg-danger/5 shadow-[0_0_15px_-5px_theme(colors.danger)]":n?"border-success/50 focus:border-success bg-success/5 shadow-[0_0_15px_-5px_theme(colors.success)]":"border-white/5 focus:border-primary/50 focus:shadow-[0_0_15px_-5px_theme(colors.primary)]"}
          `,...m}),e.jsxs("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex items-center gap-2 text-muted",children:[a&&e.jsx("button",{type:"button",onClick:()=>o(!d),className:"hover:text-primary transition-colors focus:outline-none",children:d?e.jsx(H,{size:16}):e.jsx(D,{size:16})}),r&&e.jsx(M,{size:16,className:"text-danger"}),n&&e.jsx(z,{size:16,className:"text-success"})]})]}),r&&e.jsx("p",{className:"text-xs text-danger mt-1.5 ml-1 animate-fade-in",children:r})]})},re=({title:l,children:a})=>{const[r,n]=x.useState(!1);return e.jsxs("div",{className:"border border-white/5 rounded-xl bg-surface/30 overflow-hidden transition-all duration-300",children:[e.jsxs("button",{onClick:()=>n(!r),className:"w-full flex items-center justify-between p-3 text-sm text-gray-300 hover:text-primary transition-colors hover:bg-white/5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{size:16,className:"text-primary"}),e.jsx("span",{className:"font-medium",children:l})]}),e.jsx(P,{size:16,className:`transition-transform duration-300 ${r?"rotate-180 text-primary":"text-muted"}`})]}),e.jsx("div",{className:`transition-all duration-300 ease-in-out text-xs text-gray-400 bg-background/50 ${r?"max-h-96 opacity-100 p-3 border-t border-white/5":"max-h-0 opacity-0 overflow-hidden"}`,children:a})]})},ae=({onConnect:l,isLoading:a,error:r})=>{const[n,t]=x.useState("");return e.jsxs("div",{className:"flex flex-col h-full bg-background text-white px-5 py-6",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-primary/20 to-transparent flex items-center justify-center ring-1 ring-primary/20 shadow-glow",children:e.jsx("span",{className:"material-symbols-outlined text-primary text-[32px]",children:"rocket_launch"})})}),e.jsxs("div",{className:"flex flex-col gap-2 mb-8 text-center",children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Connect Telegram"}),e.jsx("p",{className:"text-muted text-sm font-normal leading-relaxed",children:"Enter your bot token to start shifting content instantly."})]}),e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(se,{label:"Telegram Bot Token",placeholder:"123456:ABC-DEF1234...",isSecret:!0,value:n,onChange:s=>t(s.target.value),error:r}),e.jsx("button",{onClick:()=>l(n),disabled:a,className:"group w-full bg-gradient-to-r from-primary to-primary-hover hover:to-primary text-background font-bold text-sm py-3.5 px-6 rounded-lg shadow-lg shadow-primary/20 hover:shadow-primary/40 transition-all duration-300 transform active:scale-[0.98] flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:a?e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-current rounded-full animate-bounce [animation-delay:-0.3s]"}),e.jsx("div",{className:"w-1.5 h-1.5 bg-current rounded-full animate-bounce [animation-delay:-0.15s]"}),e.jsx("div",{className:"w-1.5 h-1.5 bg-current rounded-full animate-bounce"})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Connect & Detect"}),e.jsx(I,{size:18,className:"group-hover:translate-x-1 transition-transform"})]})}),e.jsx("div",{className:"text-center mt-2",children:e.jsx(re,{title:"Where do I get my token?",children:e.jsxs("div",{className:"space-y-2 text-left",children:[e.jsxs("p",{children:["1. Open ",e.jsx("a",{href:"https://t.me/BotFather",target:"_blank",className:"text-primary hover:underline",children:"@BotFather"}),"."]}),e.jsxs("p",{children:["2. Send command ",e.jsx("code",{className:"bg-white/10 px-1 rounded text-primary",children:"/newbot"}),"."]}),e.jsxs("p",{children:["3. Copy the ",e.jsx("strong",{children:"HTTP API Token"}),"."]})]})})})]})]})},ne=({profile:l,targets:a,onRefresh:r,onLogout:n})=>{var d;const[t,s]=x.useState(((d=a[0])==null?void 0:d.id)||""),m=o=>{switch(o){case"channel":return e.jsx(te,{size:18});case"group":return e.jsx(Z,{size:18});case"private":return e.jsx(R,{size:18});default:return e.jsx(V,{size:18})}};return e.jsxs("div",{className:"flex-1 flex flex-col h-full bg-background text-white overflow-hidden",children:[e.jsxs("header",{className:"sticky top-0 z-30 flex items-center justify-between px-5 py-3 border-b border-border bg-background/95 backdrop-blur-sm",children:[e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:"w-6 h-6 text-primary flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-[24px]",children:"bolt"})}),e.jsx("h1",{className:"text-base font-bold tracking-tight",children:"SwiftShift"})]}),e.jsx("button",{onClick:n,className:"flex items-center justify-center w-8 h-8 rounded-full text-muted hover:text-danger hover:bg-surface transition-colors",title:"Logout",children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"logout"})})]}),e.jsxs("div",{className:"pt-4 pb-2 px-5 flex items-center justify-center gap-2",children:[e.jsxs("div",{className:"relative flex h-2 w-2",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-primary opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-primary shadow-glow"})]}),e.jsxs("p",{className:"text-muted text-xs font-medium tracking-wide",children:["Connected: ",e.jsxs("span",{className:"text-white",children:["@",l.name]})]})]}),e.jsx("div",{className:"px-4 py-3 sticky top-0 z-20 bg-background/95 backdrop-blur-sm",children:e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(J,{size:20,className:"text-muted group-focus-within:text-primary transition-colors"})}),e.jsx("input",{className:"block w-full pl-10 pr-3 py-2.5 border-none rounded-lg bg-surface text-sm text-white placeholder-muted focus:ring-1 focus:ring-primary focus:bg-[#1E293B] transition-all outline-none",placeholder:"Filter channels...",type:"text"})]})}),e.jsxs("div",{className:"px-5 pt-2 pb-2 flex justify-between items-center",children:[e.jsx("h3",{className:"text-muted text-xs font-semibold uppercase tracking-wider",children:"Select Destination"}),e.jsx("button",{onClick:r,className:"text-[10px] text-primary hover:underline",children:"Refresh"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto px-4 flex flex-col gap-2 pb-20 no-scrollbar",children:a.length===0?e.jsx("div",{className:"text-center py-10 opacity-50",children:e.jsx("p",{className:"text-sm",children:"No channels found."})}):a.map(o=>e.jsxs("label",{className:`
                        relative flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition-all group
                        ${t===o.id?"border-primary/50 bg-surface/50":"border-transparent hover:border-[#1E293B] hover:bg-surface"}
                    `,onClick:()=>s(o.id),children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center transition-all ${t===o.id?"border-primary bg-primary":"border-muted group-hover:border-white"}`,children:e.jsx("div",{className:`w-2 h-2 rounded-full bg-background transition-opacity ${t===o.id?"opacity-100":"opacity-0"}`})})}),e.jsxs("div",{className:"flex flex-col overflow-hidden",children:[e.jsx("p",{className:`text-sm font-medium transition-colors truncate ${t===o.id?"text-white":"text-gray-300 group-hover:text-white"}`,children:o.name}),e.jsx("p",{className:"text-muted text-[10px] truncate",children:o.type})]}),e.jsx("div",{className:`ml-auto transition-colors ${t===o.id?"text-primary":"text-muted group-hover:text-white"}`,children:m(o.type)})]},o.id))}),e.jsx("div",{className:"absolute bottom-0 left-0 w-full p-4 border-t border-border bg-background/95 backdrop-blur-md z-30",children:e.jsxs("button",{className:"w-full flex items-center justify-center gap-2 bg-primary hover:bg-primary-hover active:scale-[0.98] text-background font-bold text-sm h-11 rounded-lg transition-all shadow-lg shadow-primary/20",children:[e.jsx(X,{size:20}),e.jsx("span",{children:"Send to Telegram"})]})})]})};function oe(){const[l,a]=x.useState(!0),[r,n]=x.useState(null),[t,s]=x.useState(""),[m,d]=x.useState(!1),[o,p]=x.useState([]);x.useEffect(()=>{_()},[]);const _=async()=>{a(!0);const i=await y.getActiveProfile();n(i),i&&p(i.targets),a(!1)},S=async i=>{if(s(""),d(!0),!i.includes(":")||i.length<20){s("Invalid Token Format (e.g., 12345:AbCdEf...)"),d(!1);return}const f=await k.getMe(i);if(!f.ok){s("Invalid Token. Please check and try again."),d(!1);return}const u={id:f.result.id.toString(),name:f.result.first_name,botToken:i,chatId:"",targets:[],lastSynced:Date.now()};await y.saveProfile(u),n(u),d(!1),b(u)},b=async(i=r)=>{if(!i)return;const f=await k.getUpdates(i.botToken),u=[],j=new Set;f.forEach(g=>{var v,N,w;const h=((v=g.message)==null?void 0:v.chat)||((N=g.channel_post)==null?void 0:N.chat)||((w=g.my_chat_member)==null?void 0:w.chat);h&&!j.has(h.id)&&(j.add(h.id),u.push({id:h.id.toString(),name:h.title||h.first_name||"Unlimited Chat",type:h.type,username:h.username}))}),u.length>0&&(await y.updateProfileTargets(i.id,u),p(u),chrome.runtime.sendMessage({type:"REFRESH_MENU"}))},C=async()=>{await y.clear(),n(null),p([])};return l?e.jsx("div",{className:"w-[360px] h-[600px] bg-background flex items-center justify-center text-primary",children:e.jsx(W,{className:"animate-spin"})}):r?e.jsx("div",{className:"w-[360px] h-[600px] bg-background",children:e.jsx(ne,{profile:r,targets:o,onRefresh:()=>b(r),onLogout:C})}):e.jsx("div",{className:"w-[360px] h-[600px] bg-background",children:e.jsx(ae,{onConnect:S,isLoading:m,error:t})})}E.createRoot(document.getElementById("root")).render(e.jsx($.StrictMode,{children:e.jsx(oe,{})}));
