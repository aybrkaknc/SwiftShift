import{a as o,r as c,j as e,C as K,W as Le,c as Pe,R as Ae}from"./globals-db945964.js";import{S as C,T as ae}from"./telegram-791c4748.js";import{R,L as re}from"./logService-ad1c7ab9.js";/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],He=o("Bookmark",Fe);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Ve=o("ChevronRight",qe);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],De=o("CircleCheckBig",Ue);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],we=o("Clock",We);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],ge=o("Copy",Be);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],G=o("FileText",Ge);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Ke=o("Grid3x3",Oe);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],ne=o("Hash",Qe);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Ye=o("History",Xe);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Je=o("Image",Ze);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],tt=o("Info",et);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],at=o("Link2",st);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],nt=o("List",rt);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],it=o("LogOut",lt);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],le=o("MapPin",ct);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]],ye=o("Maximize2",ot);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]],be=o("Megaphone",dt);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],ie=o("Music",xt);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],je=o("Pen",pt);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]],ce=o("Pin",ut);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ht=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],mt=o("Plus",ht);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Q=o("RefreshCw",ft);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],yt=o("Search",gt);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Ne=o("Send",bt);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],ke=o("ShieldAlert",jt);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]],vt=o("Terminal",Nt);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],O=o("Trash2",wt);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],ve=o("Users",kt);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],zt=o("X",Ct),Mt=({recents:p,onDelete:y,onResend:d,onClearAll:z})=>{var h,u,I,P;const[n,b]=c.useState("bento"),[r,M]=c.useState(null),[T,L]=c.useState(!1);c.useEffect(()=>{C.getViewMode().then(b)},[]);const $=async s=>{b(s),await C.setViewMode(s)},_=async s=>{await navigator.clipboard.writeText(s),L(!0),setTimeout(()=>L(!1),1500)},E=s=>{const f=Date.now()-s,S=Math.floor(f/6e4);if(S<1)return"now";if(S<60)return`${S}m`;const w=Math.floor(S/60);return w<24?`${w}h`:`${Math.floor(w/24)}d`},x=s=>{switch(s){case"image":return e.jsx(Je,{size:14,className:"text-primary"});case"link":return e.jsx(at,{size:14,className:"text-blue-400"});case"file":return e.jsx(G,{size:14,className:"text-amber-400"});case"audio":return e.jsx(ie,{size:14,className:"text-purple-400"});case"location":return e.jsx(le,{size:14,className:"text-emerald-400"});default:return e.jsx(G,{size:14,className:"text-muted"})}},j=()=>{switch(n){case"compact":return"grid-cols-1 gap-1";case"gallery":return"grid-cols-1 gap-3";default:return"grid-cols-2 gap-2"}};return p.length===0?e.jsx("div",{className:"flex-1 flex items-center justify-center px-4",children:e.jsxs("div",{className:"text-center py-10 px-6 flex flex-col items-center gap-4 bg-surface/20 rounded-2xl border border-white/5 w-full",children:[e.jsx(we,{size:20,className:"text-muted"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs font-bold",children:"No recent sends"}),e.jsx("p",{className:"text-[9px] text-muted leading-tight",children:"Your recent sends will appear here."})]})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1 overflow-y-auto px-4 pb-6 no-scrollbar",children:[e.jsxs("div",{className:"flex items-center justify-between sticky top-0 bg-background/80 backdrop-blur-sm py-2 z-10",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[10px] font-bold text-muted uppercase tracking-widest",children:"History"}),e.jsx("button",{onClick:z,className:"text-[9px] font-bold text-muted/50 hover:text-danger hover:bg-danger/5 px-2 py-0.5 rounded-full border border-white/5 transition-all",children:"Clear All"})]}),e.jsxs("div",{className:"flex items-center gap-0.5 bg-surface/50 border border-white/5 rounded-full p-0.5",children:[e.jsx("button",{onClick:()=>$("compact"),className:`p-1 rounded-full transition-all ${n==="compact"?"bg-primary text-background":"text-muted hover:text-white"}`,title:"Compact View",children:e.jsx(nt,{size:10})}),e.jsx("button",{onClick:()=>$("bento"),className:`p-1 rounded-full transition-all ${n==="bento"?"bg-primary text-background":"text-muted hover:text-white"}`,title:"Bento View",children:e.jsx(Ke,{size:10})}),e.jsx("button",{onClick:()=>$("gallery"),className:`p-1 rounded-full transition-all ${n==="gallery"?"bg-primary text-background":"text-muted hover:text-white"}`,title:"Gallery View",children:e.jsx(ye,{size:10})})]})]}),e.jsx("div",{className:"h-px bg-white/10 mb-2"}),e.jsx("div",{className:`grid ${j()} auto-rows-min`,children:p.map(s=>{var f,S,w;return e.jsx("div",{onClick:()=>M(s),className:`
                                relative rounded-xl border border-white/5 bg-surface/30 transition-all group cursor-pointer hover:border-primary/30 hover:bg-surface/50
                                ${n==="compact"?"p-2 flex items-center gap-3":"p-3"}
                                ${n==="bento"&&s.type==="image"?"col-span-2":""}
                            `,children:n==="compact"?e.jsxs(e.Fragment,{children:[x(s.type),e.jsx("span",{className:"flex-1 text-xs text-white truncate",children:s.preview||s.content}),e.jsx("span",{className:"text-[9px] text-muted",children:E(s.timestamp)})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[x(s.type),e.jsx("span",{className:"text-[9px] text-muted uppercase font-bold tracking-wider",children:s.type})]}),e.jsx("span",{className:"text-[9px] text-muted",children:E(s.timestamp)})]}),s.type==="image"?e.jsx("div",{className:`w-full rounded-lg bg-black/20 flex items-center justify-center overflow-hidden ${n==="gallery"?"h-48":"h-32"}`,children:e.jsx("img",{src:s.content,alt:"Recent",className:"w-full h-full object-cover",loading:"lazy",onError:m=>{m.target.src="",m.target.alt="Image unavailable"}})}):s.type==="file"?e.jsx("div",{className:`w-full rounded-lg bg-surface/50 border border-white/5 flex flex-col items-center justify-center gap-2 overflow-hidden ${n==="gallery"?"h-48":"h-32"}`,children:s.content.startsWith("data:image/")||s.content.match(/\.(jpg|jpeg|png|gif|webp|bmp)/i)?e.jsx("img",{src:s.content,alt:"Recent File",className:"w-full h-full object-cover",loading:"lazy"}):e.jsxs(e.Fragment,{children:[e.jsx(G,{size:n==="gallery"?32:24,className:"text-amber-400/50"}),e.jsx("p",{className:"text-[10px] text-muted px-4 text-center truncate w-full",children:s.content.split("/").pop()||"Uncompressed File"})]})}):s.type==="audio"?e.jsxs("div",{className:`w-full rounded-lg bg-surface/50 border border-white/5 flex flex-col items-center justify-center gap-2 ${n==="gallery"?"h-48":"h-32"}`,children:[e.jsx(ie,{size:n==="gallery"?32:24,className:"text-purple-400/50"}),e.jsx("p",{className:"text-[10px] text-muted px-4 text-center truncate w-full",children:s.content.split("/").pop()||"Audio File"})]}):s.type==="location"?e.jsxs("div",{className:`w-full rounded-lg bg-emerald-400/5 border border-emerald-400/20 flex flex-col items-center justify-center gap-2 ${n==="gallery"?"h-48":"h-32"}`,children:[e.jsx(le,{size:n==="gallery"?32:24,className:"text-emerald-400/50"}),e.jsx("p",{className:"text-[10px] text-emerald-400/80 px-4 text-center font-bold",children:"Interactive Location"}),e.jsx("p",{className:"text-[9px] text-muted px-4 text-center truncate w-full",children:s.content})]}):s.type==="link"?e.jsxs("div",{className:"space-y-2",children:[((f=s.metadata)==null?void 0:f.image)&&e.jsx("div",{className:"w-full rounded-lg bg-black/20 flex items-center justify-center overflow-hidden h-24 mb-2",children:e.jsx("img",{src:s.metadata.image,alt:"Link Preview",className:"w-full h-full object-cover",onError:m=>m.target.style.display="none"})}),e.jsxs("div",{className:"space-y-1",children:[((S=s.metadata)==null?void 0:S.siteName)&&e.jsx("p",{className:"text-primary text-[8px] font-bold uppercase tracking-wider",children:s.metadata.siteName}),e.jsx("p",{className:`font-medium text-white ${n==="gallery"?"text-sm":"text-xs"} line-clamp-2`,children:((w=s.metadata)==null?void 0:w.title)||s.preview}),e.jsx("p",{className:`text-muted truncate ${n==="gallery"?"text-xs":"text-[10px]"}`,children:s.content})]})]}):e.jsx("p",{className:`text-gray-300 ${n==="gallery"?"text-sm line-clamp-6":"text-xs line-clamp-3"}`,children:s.preview}),e.jsx("div",{className:"mt-2 pt-2",children:e.jsxs("span",{className:"text-[9px] text-muted truncate max-w-[100px] block",children:["→ ",s.targetName]})}),e.jsxs("div",{className:"absolute right-2 bottom-2 flex items-center gap-1 opacity-0 group-hover:opacity-100 translate-y-2 group-hover:translate-y-0 transition-all duration-200",children:[e.jsx("button",{onClick:m=>{m.stopPropagation(),y(s.id)},className:"w-7 h-7 flex items-center justify-center rounded-full bg-surface/80 text-muted border border-white/10 hover:bg-danger hover:text-white hover:border-danger transition-all",title:"Delete",children:e.jsx(O,{size:12})}),e.jsx("button",{onClick:m=>{m.stopPropagation(),d(s)},className:"w-7 h-7 flex items-center justify-center rounded-full bg-surface/80 text-muted border border-white/10 hover:bg-primary hover:text-background hover:border-primary transition-all",title:"Resend",children:e.jsx(Q,{size:12})})]})]})},s.id)})})]}),r&&e.jsx("div",{onClick:()=>M(null),className:"absolute inset-0 bg-black/80 backdrop-blur-md z-50 flex items-center justify-center p-4 animate-in fade-in zoom-in duration-200",children:e.jsxs("div",{onClick:s=>s.stopPropagation(),className:"w-full max-h-[90%] bg-surface border border-white/10 rounded-2xl shadow-2xl flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[x(r.type),e.jsx("span",{className:"text-xs font-bold uppercase",children:r.type}),e.jsxs("span",{className:"text-[9px] text-muted",children:["• ",E(r.timestamp)]})]}),e.jsx("button",{onClick:()=>M(null),className:"p-1 rounded-lg hover:bg-white/5 transition-colors",children:e.jsx(zt,{size:16,className:"text-muted"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 no-scrollbar",children:r.type==="image"?e.jsx("img",{src:r.content,alt:"Full",className:"w-full rounded-lg object-contain max-h-[300px]"}):r.type==="file"?e.jsx("div",{className:"flex flex-col items-center justify-center min-h-[200px] gap-4 bg-surface/50 rounded-xl border border-white/5 overflow-hidden",children:r.content.startsWith("data:image/")||r.content.match(/\.(jpg|jpeg|png|gif|webp|bmp)/i)?e.jsx("img",{src:r.content,alt:"Full File",className:"w-full rounded-lg object-contain max-h-[300px]"}):e.jsxs(e.Fragment,{children:[e.jsx(G,{size:48,className:"text-amber-400/50"}),e.jsxs("div",{className:"text-center space-y-1",children:[e.jsx("p",{className:"text-sm font-bold text-white truncate max-w-[250px] px-4",children:r.content.split("/").pop()||"Uncompressed File"}),e.jsx("p",{className:"text-[10px] text-muted",children:"Original Quality Document"})]})]})}):r.type==="audio"?e.jsxs("div",{className:"flex flex-col items-center justify-center py-10 gap-4 bg-surface/50 rounded-xl border border-white/5",children:[e.jsx(ie,{size:48,className:"text-purple-400/50"}),e.jsxs("div",{className:"text-center space-y-1",children:[e.jsx("p",{className:"text-sm font-bold text-white truncate max-w-[250px] px-4",children:r.content.split("/").pop()||"Audio File"}),e.jsx("p",{className:"text-[10px] text-muted",children:"Native Audio Content"})]}),e.jsxs("audio",{controls:!0,className:"w-full max-w-[280px] h-10 mt-2 filter invert opacity-80",children:[e.jsx("source",{src:r.content,type:"audio/mpeg"}),"Your browser does not support the audio element."]})]}):r.type==="location"?e.jsxs("div",{className:"flex flex-col items-center justify-center py-10 gap-4 bg-emerald-400/5 rounded-xl border border-emerald-400/10",children:[e.jsx(le,{size:48,className:"text-emerald-400/50"}),e.jsxs("div",{className:"text-center space-y-1",children:[e.jsx("p",{className:"text-sm font-bold text-white",children:"Interactive Location"}),e.jsx("p",{className:"text-[10px] text-muted px-6 break-words",children:r.content})]}),e.jsxs("button",{onClick:()=>window.open(r.content,"_blank"),className:"mt-2 px-4 py-1.5 bg-emerald-500/10 hover:bg-emerald-500/20 text-emerald-400 text-[10px] font-bold rounded-full border border-emerald-500/20 transition-all flex items-center gap-2",children:[e.jsx(ye,{size:12})," Open in Maps"]})]}):r.type==="link"?e.jsxs("div",{className:"space-y-4",children:[((h=r.metadata)==null?void 0:h.image)&&e.jsx("img",{src:r.metadata.image,alt:"Preview",className:"w-full rounded-lg object-cover max-h-[200px]",onError:s=>s.target.style.display="none"}),e.jsxs("div",{className:"bg-surface/50 p-4 rounded-xl border border-white/5 space-y-2",children:[((u=r.metadata)==null?void 0:u.siteName)&&e.jsx("p",{className:"text-primary text-[10px] font-bold uppercase tracking-widest",children:r.metadata.siteName}),e.jsx("h3",{className:"text-base font-bold text-white leading-tight",children:((I=r.metadata)==null?void 0:I.title)||r.preview}),((P=r.metadata)==null?void 0:P.description)&&e.jsx("p",{className:"text-xs text-muted line-clamp-3 leading-relaxed",children:r.metadata.description}),e.jsxs("div",{className:"pt-2 flex items-center justify-between gap-3",children:[e.jsx("p",{className:"text-[10px] text-primary truncate flex-1",children:r.content}),e.jsx("button",{onClick:()=>_(r.content),className:"p-1.5 rounded-full bg-white/5 hover:bg-white/10 transition-colors",title:"Copy Link",children:T?e.jsx(K,{size:14,className:"text-primary"}):e.jsx(ge,{size:14,className:"text-muted"})})]})]})]}):e.jsxs("div",{className:"relative",children:[e.jsx("p",{className:"text-sm text-white whitespace-pre-wrap break-words select-text",children:r.content}),e.jsx("button",{onClick:()=>_(r.content),className:"absolute top-0 right-0 p-2 rounded-full bg-surface/50 hover:bg-surface border border-white/5 transition-all",title:"Copy",children:T?e.jsx(K,{size:14,className:"text-primary"}):e.jsx(ge,{size:14,className:"text-muted"})})]})}),e.jsxs("div",{className:"p-4 border-t border-white/5 flex items-center gap-3",children:[e.jsxs("span",{className:"text-[10px] text-muted flex-1 truncate",children:["→ ",r.targetName]}),e.jsxs("button",{onClick:()=>{d(r),M(null)},className:"px-5 py-2.5 bg-primary text-background text-xs font-bold rounded-full hover:bg-primary-hover transition-all flex items-center gap-2 shadow-lg shadow-primary/20",children:[e.jsx(Q,{size:12})," Resend"]})]})]})})]})},$t=({logs:p,onClear:y})=>{const d=n=>new Date(n).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}),z=n=>{switch(n){case"error":return e.jsx(ke,{size:16,className:"text-danger"});case"success":return e.jsx(De,{size:16,className:"text-primary"});case"info":return e.jsx(tt,{size:16,className:"text-blue-400"})}};return p.length===0?e.jsx("div",{className:"flex-1 flex items-center justify-center px-4",children:e.jsxs("div",{className:"text-center py-10 px-6 flex flex-col items-center gap-4 bg-surface/20 rounded-2xl border border-white/5 w-full",children:[e.jsx(vt,{size:20,className:"text-muted"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs font-bold",children:"No logs available"}),e.jsx("p",{className:"text-[9px] text-muted leading-tight",children:"Operation history will appear here."})]})]})}):e.jsxs("div",{className:"flex-1 overflow-y-auto px-4 pb-6 no-scrollbar flex flex-col",children:[e.jsx("div",{className:"flex items-center justify-between sticky top-0 bg-background/80 backdrop-blur-sm py-2 z-10",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[10px] font-bold text-muted uppercase tracking-widest",children:"System Logs"}),e.jsx("button",{onClick:y,className:"text-[9px] font-bold text-muted/50 hover:text-danger hover:bg-danger/5 px-2 py-0.5 rounded-full border border-white/5 transition-all",children:"Clear All"})]})}),e.jsx("div",{className:"h-px bg-white/10 mb-2"}),e.jsx("div",{className:"flex flex-col gap-1.5",children:p.map(n=>e.jsxs("div",{className:"p-3 rounded-xl border border-white/5 bg-surface/30 flex flex-col gap-1 transition-all hover:bg-surface/50",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[z(n.type),e.jsx("span",{className:`text-[10px] font-bold uppercase tracking-wide ${n.type==="error"?"text-danger":n.type==="success"?"text-primary":"text-blue-400"}`,children:n.type})]}),e.jsxs("div",{className:"flex items-center gap-1 text-muted",children:[e.jsx(we,{size:10}),e.jsx("span",{className:"text-[9px]",children:d(n.timestamp)})]})]}),e.jsx("p",{className:"text-xs text-white font-medium break-words mt-0.5",children:n.message}),n.details&&e.jsx("p",{className:"text-[10px] text-muted font-mono bg-black/20 p-1.5 rounded-md mt-1 break-all",children:n.details}),n.targetName&&e.jsxs("div",{className:"mt-1 flex items-center gap-1 text-muted text-[9px] font-medium italic",children:[e.jsx("span",{children:"Target:"}),e.jsx("span",{children:n.targetName})]})]},n.id))})]})},_t=()=>{const[p,y]=c.useState("dark"),[d,z]=c.useState(!1);c.useEffect(()=>{C.getTheme().then(r=>{y(r),n(r)})},[]);const n=r=>{r==="light"?document.documentElement.classList.add("light"):document.documentElement.classList.remove("light")},b=async()=>{if(d)return;z(!0);const r=p==="dark"?"light":"dark";setTimeout(()=>{y(r),n(r),C.setTheme(r)},150),setTimeout(()=>{z(!1)},500)};return e.jsxs("button",{onClick:b,className:"relative flex items-center justify-center w-8 h-8 rounded-full text-muted hover:text-primary hover:bg-primary/10 transition-all overflow-hidden",title:p==="dark"?"Aydınlık Temaya Geç":"Karanlık Temaya Geç",children:[e.jsx("div",{className:`absolute transition-all duration-500 ${p==="light"&&!d?"theme-icon-enter":p==="dark"||d?"opacity-0 scale-0 rotate-90":""}`,children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"5"}),e.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),e.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),e.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),e.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),e.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),e.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),e.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),e.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]})}),e.jsx("div",{className:`absolute transition-all duration-500 ${p==="dark"&&!d?"theme-icon-enter":p==="light"||d?"opacity-0 scale-0 -rotate-90":""}`,children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"}),e.jsx("circle",{cx:"17",cy:"5",r:"1",className:"star-twinkle fill-current"}),e.jsx("circle",{cx:"20",cy:"8",r:"0.5",className:"star-twinkle star-twinkle-delay-1 fill-current"}),e.jsx("circle",{cx:"15",cy:"3",r:"0.5",className:"star-twinkle star-twinkle-delay-2 fill-current"})]})})]})},St=({profile:p,targets:y,onRefresh:d,onLogout:z,onDeleteTarget:n,onAddTarget:b,onRenameTarget:r,onTogglePin:M})=>{const[T,L]=c.useState(""),[$,_]=c.useState(!1),[E,x]=c.useState(""),[j,h]=c.useState({}),[u,I]=c.useState(null),[P,s]=c.useState(""),[f,S]=c.useState("channels"),[w,m]=c.useState(null),[Ce,oe]=c.useState(!1),[A,H]=c.useState({open:!1,type:"recents"});c.useEffect(()=>{if(w){oe(!1);const t=setTimeout(()=>oe(!0),3e3),l=setTimeout(()=>m(null),3400);return()=>{clearTimeout(t),clearTimeout(l)}}},[w]);const[ze,q]=c.useState([]),[Me,X]=c.useState([]);c.useEffect(()=>{f==="recents"?R.getAll().then(q):f==="logs"&&re.getAll().then(X)},[f]),c.useEffect(()=>{chrome.storage.local.get("recentTargets",t=>{const l=t.recentTargets;l&&l.length>0&&y.find(a=>a.id===l[0])?L(l[0]):y.length>0&&L(y[0].id)})},[y]);const Y=async t=>{u||(L(t),await C.addRecentTarget(t),chrome.runtime.sendMessage({type:"REFRESH_MENU"}))},de=t=>{I(t.id),s(t.name)},U=()=>{u&&r&&r(u,P),I(null),s("")},xe=async t=>{if($)return;const l=y.find(v=>v.id===t);if(!l)return;_(!0);const[a]=await chrome.tabs.query({active:!0,lastFocusedWindow:!0});if(!(a!=null&&a.url)){const[v]=await chrome.tabs.query({active:!0,currentWindow:!0});if(!(v!=null&&v.url)){_(!1);return}}if(!(a!=null&&a.id)||!a.url){_(!1);return}const k={chatId:t.includes(":")?t.split(":")[0]:t,threadId:l.threadId,text:`${a.title}
${a.url}`},N=await ae.sendPayloadSmart(p.botToken,k);m({message:N.success?`Sent to ${l.name}`:`Error: ${N.error}`,type:N.success?"success":"error"}),N.success&&await R.add({type:"link",content:a.url,preview:a.title||a.url,targetName:l.name,targetId:l.id,threadId:l.threadId}),chrome.notifications.create({type:"basic",iconUrl:"icons/icon128.png",title:N.success?"Sent Successfully":"Failed to Send",message:N.success?`Sent to ${l.name}`:N.error||"Unknown Error"}),_(!1),Y(t)},$e=async t=>{await R.delete(t);const l=await R.getAll();q(l)},_e=async t=>{if($)return;_(!0);const l={chatId:t.targetId.includes(":")?t.targetId.split(":")[0]:t.targetId,threadId:t.threadId};t.type==="link"?l.text=`${t.preview}
${t.content}`:t.type==="image"?l.photo=t.content:t.type==="audio"?l.audio=t.content:t.type==="location"?l.text=t.content:t.type==="file"?l.document=t.content:l.text=t.content;const a=await ae.sendPayloadSmart(p.botToken,l);if(m({message:a.success?`Resent to ${t.targetName}`:`Resend Error: ${a.error}`,type:a.success?"success":"error"}),chrome.notifications.create({type:"basic",iconUrl:"icons/icon128.png",title:a.success?"Resent Successfully":"Failed to Resend",message:a.success?`Resent to ${t.targetName}`:a.error||"Unknown Error"}),a.success){await R.delete(t.id),await R.add({type:t.type,content:t.content,preview:t.preview,targetName:t.targetName,targetId:t.targetId,threadId:t.threadId});const k=await R.getAll();q(k)}_(!1)},Se=async()=>{if(f==="channels")d(),m({message:"Channels updated",type:"success"});else if(f==="recents"){const t=await R.getAll();q(t),m({message:"Recents updated",type:"success"})}else if(f==="logs"){const t=await re.getAll();X(t),m({message:"Logs updated",type:"success"})}},Te=async()=>{A.type==="recents"?(await R.clear(),q([]),m({message:"Recents history cleared",type:"success"})):(await re.clear(),X([]),m({message:"System logs cleared",type:"success"})),H({...A,open:!1})},F=y.filter(t=>{var l;return t.name.toLowerCase().includes(E.toLowerCase())||((l=t.username)==null?void 0:l.toLowerCase().includes(E.toLowerCase()))}).sort((t,l)=>t.pinned===l.pinned?0:t.pinned?-1:1),Ee=t=>{switch(t){case"channel":return e.jsx(be,{size:14});case"group":return e.jsx(ve,{size:14});case"private":return e.jsx(He,{size:14});case"topic":return e.jsx(ne,{size:14});default:return e.jsx(ne,{size:14})}},[Ie,D]=c.useState(!1),[W,pe]=c.useState(""),[B,ue]=c.useState(""),[V,Z]=c.useState(!1),J=async()=>{const t=W.trim(),l=B.trim();if(!t||!l){Z(!0);return}let a=t,k,N="private";const v=t.match(/(-?\d+)[_: ](\d+)/);if(v)a=v[1],k=parseInt(v[2]);else{const fe=t.match(/(-?\d+)$/);fe&&(a=fe[1])}k?N="topic":a.startsWith("-")?N="channel":N="private";const i=await ae.getChat(p.botToken,a);i.ok||m({message:`Bot warning: ${i.description||"No access to this chat."}`,type:"error"});const Re={id:k?`${a}:${k}`:a,name:l,type:N,username:"",threadId:k};b&&b(Re),D(!1),pe(""),ue("")},he=F.filter(t=>t.type==="private"),ee=F.filter(t=>(t.type==="channel"||t.type==="group")&&!t.parentId),te=new Map;F.filter(t=>t.parentId).forEach(t=>{const l=te.get(t.parentId)||[];l.push(t),te.set(t.parentId,l)});const me=F.filter(t=>t.type==="topic"&&t.parentId&&!ee.some(l=>l.id===t.parentId)),se=(t,l)=>e.jsx("div",{className:"flex flex-col gap-1.5",children:t.map(a=>{const k=(l==null?void 0:l.get(a.id))||[],N=k.length>0,v=j[a.id]??!0;return e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:`
                        relative flex items-center gap-2.5 p-2.5 rounded-xl border cursor-pointer transition-all group
                        ${T===a.id?"border-primary/30 bg-primary/5":"border-transparent hover:border-white/5 hover:bg-surface/30"}
                    `,onClick:()=>Y(a.id),children:[N&&e.jsx("button",{onClick:i=>{i.stopPropagation(),h(g=>({...g,[a.id]:!v}))},className:"text-muted hover:text-white transition-colors",children:e.jsx(Ve,{size:12,className:`transition-transform duration-200 ${v?"rotate-90":""}`})}),e.jsxs("div",{className:`
                        w-8 h-8 rounded-lg flex items-center justify-center transition-all duration-200 flex-shrink-0 relative
                        ${T===a.id?"bg-primary/20 text-primary":"bg-surface/50 text-muted"}
                    `,children:[Ee(a.type),a.pinned&&e.jsx("div",{className:"absolute -top-1 -right-1 bg-background rounded-full w-3.5 h-3.5 flex items-center justify-center border border-white/10",children:e.jsx(ce,{size:8,className:"text-primary fill-primary"})})]}),e.jsx("div",{className:"flex flex-col overflow-hidden flex-1",children:u===a.id?e.jsxs("div",{className:"flex items-center gap-2",onClick:i=>i.stopPropagation(),children:[e.jsx("input",{className:"w-full bg-black/50 border border-primary/50 rounded px-1 text-[13px] text-white focus:outline-none h-6",value:P,onChange:i=>s(i.target.value),autoFocus:!0,onKeyDown:i=>{i.key==="Enter"&&U(),i.key==="Escape"&&I(null)}}),e.jsx("button",{onClick:U,className:"text-primary hover:text-white",children:e.jsx(K,{size:14})})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:`text-[13px] font-bold transition-colors truncate flex items-center gap-1.5 ${T===a.id?"text-white":"text-gray-400 group-hover:text-white"}`,children:a.name}),e.jsx("p",{className:"text-[9px] font-bold text-muted/60 uppercase tracking-tighter truncate",children:a.type})]})}),!u&&e.jsxs("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex items-center gap-1 px-1.5 py-1 rounded-full bg-surface/80 backdrop-blur-md border border-white/10 shadow-xl opacity-0 scale-90 group-hover:opacity-100 group-hover:scale-100 transition-all duration-200 z-10",children:[e.jsx("button",{onClick:i=>{i.stopPropagation(),M&&M(a.id)},className:`w-7 h-7 rounded-full flex items-center justify-center transition-all ${a.pinned?"text-primary bg-primary/10":"text-muted hover:text-white hover:bg-white/10"}`,title:a.pinned?"Unpin":"Pin to top",children:e.jsx(ce,{size:14,className:a.pinned?"fill-primary":""})}),e.jsx("button",{onClick:i=>{i.stopPropagation(),de(a)},className:"w-7 h-7 rounded-full flex items-center justify-center text-muted hover:text-white hover:bg-white/10 transition-all",title:"Rename",children:e.jsx(je,{size:14})}),e.jsx("button",{onClick:i=>{i.stopPropagation(),n(a.id)},className:"w-7 h-7 rounded-full flex items-center justify-center text-muted hover:text-danger hover:bg-danger/10 transition-all",title:"Remove",children:e.jsx(O,{size:14})}),e.jsx("div",{className:"w-px h-4 bg-white/10 mx-0.5"}),e.jsx("button",{onClick:i=>{i.stopPropagation(),xe(a.id)},disabled:$,className:"w-8 h-8 rounded-full flex items-center justify-center text-primary hover:text-white hover:bg-primary transition-all active:scale-90",title:"Send Current",children:e.jsx(Ne,{size:16,strokeWidth:2.5})})]})]}),N&&v&&e.jsx("div",{className:"ml-6 pl-3 border-l border-white/10 mt-1.5 flex flex-col gap-1",children:k.map(i=>e.jsxs("div",{className:`
                                            relative flex items-center gap-2 p-2 rounded-lg border cursor-pointer transition-all group
                                            ${T===i.id?"border-primary/30 bg-primary/5":"border-transparent hover:border-white/5 hover:bg-surface/30"}
                                        `,onClick:()=>Y(i.id),children:[e.jsx(ne,{size:12,className:"text-muted flex-shrink-0"}),e.jsx("div",{className:"flex-1 overflow-hidden",children:u===i.id?e.jsxs("div",{className:"flex items-center gap-1",onClick:g=>g.stopPropagation(),children:[e.jsx("input",{className:"w-full bg-black/50 border border-primary/50 rounded px-1 text-xs text-white focus:outline-none h-5",value:P,onChange:g=>s(g.target.value),autoFocus:!0,onKeyDown:g=>{g.key==="Enter"&&U(),g.key==="Escape"&&I(null)}}),e.jsx("button",{onClick:U,className:"text-primary hover:text-white",children:e.jsx(K,{size:12})})]}):e.jsx("span",{className:`text-xs font-medium block truncate ${T===i.id?"text-white":"text-gray-400 group-hover:text-white"}`,children:i.name})}),!u&&e.jsxs("div",{className:"absolute right-1 top-1/2 -translate-y-1/2 flex items-center gap-1.5 px-1.5 py-1 rounded-xl bg-surface/80 backdrop-blur-md border border-white/10 shadow-xl opacity-0 scale-90 group-hover:opacity-100 group-hover:scale-100 transition-all duration-200 z-10",children:[e.jsx("button",{onClick:g=>{g.stopPropagation(),M&&M(i.id)},className:`w-5 h-5 rounded flex items-center justify-center transition-all ${i.pinned?"text-primary":"text-muted hover:text-white hover:bg-white/10"}`,title:i.pinned?"Unpin":"Pin",children:e.jsx(ce,{size:10,className:i.pinned?"fill-primary":""})}),e.jsx("button",{onClick:g=>{g.stopPropagation(),de(i)},className:"w-5 h-5 rounded flex items-center justify-center text-muted hover:text-white hover:bg-white/10 transition-all",title:"Rename",children:e.jsx(je,{size:10})}),e.jsx("button",{onClick:g=>{g.stopPropagation(),n(i.id)},className:"w-5 h-5 rounded flex items-center justify-center text-muted hover:text-danger hover:bg-danger/10 transition-all",title:"Remove",children:e.jsx(O,{size:10})}),e.jsx("div",{className:"w-px h-3 bg-white/10 mx-0.5"}),e.jsx("button",{onClick:g=>{g.stopPropagation(),xe(i.id)},disabled:$,className:"w-6 h-6 rounded-md flex items-center justify-center text-primary hover:text-white hover:bg-primary transition-all active:scale-90",title:"Send",children:e.jsx(Ne,{size:11,strokeWidth:2.5})})]})]},i.id))})]},a.id)})});return e.jsxs("div",{className:"flex-1 flex flex-col h-full bg-background text-white overflow-hidden relative",children:[e.jsxs("header",{className:"sticky top-0 z-30 flex items-center justify-between px-4 py-3 border-b border-white/5 bg-background/95 backdrop-blur-sm",children:[e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("img",{src:"icons/icon128.png",className:"w-5 h-5 object-contain",alt:"SwiftShift Logo"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h1",{className:"text-base font-bold tracking-tight leading-tight",children:"SwiftShift"}),p.displayName&&e.jsxs("span",{className:"text-[10px] text-muted font-medium -mt-0.5",children:["Hello, ",p.displayName]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(_t,{}),f==="channels"&&e.jsx("button",{onClick:()=>D(!0),className:"flex items-center justify-center w-8 h-8 rounded-full text-muted hover:text-white hover:bg-white/10 transition-all",title:"Add Chat",children:e.jsx(mt,{size:18})}),e.jsx("button",{onClick:Se,className:"flex items-center justify-center w-8 h-8 rounded-full text-muted hover:text-primary hover:bg-primary/10 transition-all",title:"Reload List",children:e.jsx(Q,{size:18,className:$?"animate-spin":""})}),e.jsx("button",{onClick:z,className:"flex items-center justify-center w-8 h-8 rounded-full text-muted hover:text-danger hover:bg-danger/10 transition-all",title:"Logout",children:e.jsx(it,{size:18,className:"-translate-x-[1px]"})})]})]}),w&&e.jsx("div",{className:`
                    absolute top-[52px] left-0 right-0 z-50 px-4 py-2 
                    ${Ce?"toast-animate-out":"toast-animate-in"}
                    ${w.type==="success"?"bg-primary/20 text-primary border-b border-primary/20":"bg-danger/20 text-danger border-b border-danger/20"}
                    backdrop-blur-md text-[11px] font-bold text-center shadow-lg
                `,children:w.message}),e.jsxs("div",{className:"pt-3 pb-1 px-4 flex items-center justify-center gap-2",children:[e.jsxs("div",{className:"relative flex h-1.5 w-1.5",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-primary opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-1.5 w-1.5 bg-primary"})]}),e.jsxs("div",{onClick:()=>{const t=p.username||p.name.replace(/\s+/g,"");window.open(`https://t.me/${t}`,"_blank")},className:"text-muted text-[10px] font-bold tracking-widest uppercase cursor-pointer group",children:["Bot: ",e.jsxs("span",{className:"text-white group-hover:text-primary transition-colors",children:["@",p.username||p.name]})]})]}),e.jsx("div",{className:"px-4 py-3",children:e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3.5 flex items-center pointer-events-none",children:e.jsx(yt,{size:16,className:"text-muted group-focus-within:text-primary transition-colors"})}),e.jsx("input",{className:"block w-full pl-10 pr-3 py-2 border border-white/5 rounded-xl bg-surface/40 text-sm text-white placeholder-muted/50 focus:ring-1 focus:ring-primary focus:border-primary/40 focus:bg-surface/60 transition-all outline-none",placeholder:"Quick search...",type:"text",value:E,onChange:t=>x(t.target.value)})]})}),e.jsxs("div",{className:"px-4 pb-3 flex gap-2",children:[e.jsxs("button",{onClick:()=>S("channels"),className:`flex-1 flex items-center justify-center gap-2 py-2 rounded-full text-xs font-bold transition-all ${f==="channels"?"bg-primary/20 text-primary border border-primary/30":"bg-surface/30 text-muted border border-white/5 hover:bg-surface/50 hover:text-white"}`,children:[e.jsx(be,{size:14}),"Channels"]}),e.jsxs("button",{onClick:()=>S("recents"),className:`flex-1 flex items-center justify-center gap-2 py-2 rounded-full text-xs font-bold transition-all ${f==="recents"?"bg-primary/20 text-primary border border-primary/30":"bg-surface/30 text-muted border border-white/5 hover:bg-surface/50 hover:text-white"}`,children:[e.jsx(Ye,{size:14}),"Recents"]}),e.jsxs("button",{onClick:()=>S("logs"),className:`flex-1 flex items-center justify-center gap-2 py-2 rounded-full text-xs font-bold transition-all ${f==="logs"?"bg-primary/20 text-primary border border-primary/30":"bg-surface/30 text-muted border border-white/5 hover:bg-surface/50 hover:text-white"}`,children:[e.jsx(ke,{size:14}),"Logs"]})]}),f==="channels"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`flex-1 overflow-y-auto px-4 pb-6 no-scrollbar ${F.length===0?"flex flex-col items-center justify-center":""}`,children:F.length===0?e.jsxs("div",{className:"text-center py-10 px-6 flex flex-col items-center gap-4 bg-surface/20 rounded-2xl border border-white/5 w-full",children:[e.jsx(ve,{size:20,className:"text-muted"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs font-bold",children:"No destinations added"}),e.jsx("p",{className:"text-[9px] text-muted leading-tight",children:"Click + to add a chat manually."})]})]}):e.jsxs("div",{className:"flex flex-col gap-4 w-full",children:[he.length>0&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"flex items-center gap-2 py-2",children:e.jsx("span",{className:"text-[10px] font-bold text-muted uppercase tracking-widest",children:"Personal"})}),e.jsx("div",{className:"h-px bg-white/10 mb-2"}),se(he)]}),ee.length>0&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"flex items-center gap-2 py-2",children:e.jsx("span",{className:"text-[10px] font-bold text-muted uppercase tracking-widest",children:"Channels & Groups"})}),e.jsx("div",{className:"h-px bg-white/10 mb-2"}),e.jsx("div",{className:"flex flex-col gap-1.5",children:se(ee,te)})]}),me.length>0&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"flex items-center gap-2 py-2",children:e.jsx("span",{className:"text-[10px] font-bold text-muted uppercase tracking-widest",children:"Other Topics"})}),e.jsx("div",{className:"h-px bg-white/10 mb-2"}),se(me)]})]})}),Ie&&e.jsx("div",{onClick:()=>D(!1),className:"absolute inset-0 bg-black/80 backdrop-blur-md z-50 flex items-center justify-center p-6 animate-in fade-in zoom-in duration-200",children:e.jsxs("div",{onClick:t=>t.stopPropagation(),className:"w-full bg-surface border border-white/10 rounded-2xl p-5 shadow-2xl space-y-4",children:[e.jsx("h3",{className:"text-lg font-bold text-center",children:"Add Destination"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-[10px] font-bold uppercase ml-1 ${V&&!W?"text-danger":"text-muted"}`,children:"Chat ID or URL"}),e.jsx("input",{className:`w-full h-9 bg-black/20 border rounded-lg px-3 text-xs text-white focus:outline-none transition-colors ${V&&!W?"border-danger/50 bg-danger/5":"border-white/10 focus:border-primary/50"}`,placeholder:"-100... or web.telegram.org/...",value:W,onChange:t=>{pe(t.target.value),Z(!1)},onKeyDown:t=>t.key==="Enter"&&J(),autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-[10px] font-bold uppercase ml-1 ${V&&!B?"text-danger":"text-muted"}`,children:"Display Name"}),e.jsx("input",{className:`w-full h-9 bg-black/20 border rounded-lg px-3 text-xs text-white focus:outline-none transition-colors ${V&&!B?"border-danger/50 bg-danger/5":"border-white/10 focus:border-primary/50"}`,placeholder:"My Channel",value:B,onChange:t=>{ue(t.target.value),Z(!1)},onKeyDown:t=>t.key==="Enter"&&J()})]}),V&&e.jsx("p",{className:"text-[10px] text-danger font-bold text-center mt-1 animate-pulse",children:"Required fields are missing!"})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx("button",{onClick:()=>D(!1),className:"flex-1 py-2 text-xs font-bold text-muted hover:bg-white/5 rounded-full transition-all",children:"Cancel"}),e.jsx("button",{onClick:J,className:"flex-1 py-2 bg-primary text-background text-xs font-bold rounded-full hover:bg-primary-hover transition-all shadow-lg shadow-primary/20",children:"Add"})]})]})})]}):f==="recents"?e.jsx(Mt,{recents:ze,onDelete:$e,onResend:_e,onClearAll:()=>H({open:!0,type:"recents"})}):e.jsx($t,{logs:Me,onClear:()=>H({open:!0,type:"logs"})}),A.open&&e.jsx("div",{onClick:()=>H({...A,open:!1}),className:"absolute inset-0 bg-black/80 backdrop-blur-md z-[100] flex items-center justify-center p-6 animate-in fade-in zoom-in duration-200",children:e.jsxs("div",{onClick:t=>t.stopPropagation(),className:"w-full bg-surface border border-white/10 rounded-2xl p-6 shadow-2xl text-center space-y-4",children:[e.jsx("div",{className:"w-12 h-12 bg-danger/10 text-danger rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx(O,{size:24})}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("h3",{className:"text-base font-bold text-white",children:["Clear ",A.type==="recents"?"Recents":"Logs","?"]}),e.jsxs("p",{className:"text-[11px] text-muted leading-relaxed",children:["This action cannot be undone. All recorded ",A.type," will be permanently deleted."]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx("button",{onClick:()=>H({...A,open:!1}),className:"flex-1 py-2.5 text-xs font-bold text-muted hover:bg-white/5 rounded-full transition-all",children:"Cancel"}),e.jsx("button",{onClick:Te,className:"flex-1 py-2.5 bg-danger text-white text-xs font-bold rounded-full hover:bg-danger/80 transition-all shadow-lg shadow-danger/20",children:"Clear All"})]})]})})]})};function Tt(){const[p,y]=c.useState(!0),[d,z]=c.useState(null),[n,b]=c.useState([]);c.useEffect(()=>{(async()=>{await r()})()},[]);const r=async()=>{y(!0);const x=await C.getActiveProfile();z(x),x&&b(x.targets),y(!1)},M=async(x=d)=>{if(!x)return;const j=await C.getActiveProfile();j&&b(j.targets)},T=async x=>{if(!d)return;const j=n.filter(h=>h.id!==x&&h.parentId!==x);await C.updateProfileTargets(d.id,j),b(j),chrome.runtime.sendMessage({type:"REFRESH_MENU"})},L=async x=>{if(!d)return;if(n.some(u=>{if(u.id===x.id)return!0;const I=u.id.startsWith("-100")?u.id.substring(4):u.id,P=x.id.startsWith("-100")?x.id.substring(4):x.id;return I===P})){console.warn("Target already exists");return}const h=[...n,x];await C.updateProfileTargets(d.id,h),b(h),chrome.runtime.sendMessage({type:"REFRESH_MENU"})},$=async(x,j)=>{if(!d)return;const h=n.map(u=>u.id===x?{...u,name:j}:u);await C.updateProfileTargets(d.id,h),b(h),chrome.runtime.sendMessage({type:"REFRESH_MENU"})},_=async x=>{if(!d)return;const j=n.map(h=>h.id===x?{...h,pinned:!h.pinned}:h);await C.updateProfileTargets(d.id,j),b(j),chrome.runtime.sendMessage({type:"REFRESH_MENU"})},E=async()=>{await C.clear(),z(null),b([]),chrome.runtime.sendMessage({type:"REFRESH_MENU"})};return p?e.jsx("div",{className:"w-[400px] h-[560px] bg-background flex items-center justify-center text-primary",children:e.jsx(Q,{className:"animate-spin"})}):d?e.jsx("div",{className:"w-[400px] h-[560px] bg-background",children:e.jsx(St,{profile:d,targets:n,onRefresh:()=>M(d),onLogout:E,onDeleteTarget:T,onAddTarget:L,onRenameTarget:$,onTogglePin:_})}):e.jsx("div",{className:"w-[400px] h-[560px] bg-background overflow-hidden",children:e.jsx(Le,{embedded:!0,onComplete:r})})}Pe.createRoot(document.getElementById("root")).render(e.jsx(Ae.StrictMode,{children:e.jsx(Tt,{})}));
